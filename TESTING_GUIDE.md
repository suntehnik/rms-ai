# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## üéØ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
- **Unit —Ç–µ—Å—Ç—ã**: SQLite (–±—ã—Å—Ç—Ä–æ, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ)
- **Integration —Ç–µ—Å—Ç—ã**: PostgreSQL —á–µ—Ä–µ–∑ testcontainers (—Ä–µ–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞)
- **E2E —Ç–µ—Å—Ç—ã**: PostgreSQL —á–µ—Ä–µ–∑ testcontainers (–ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make test-fast

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
make test-compile

# Unit —Ç–µ—Å—Ç—ã (–≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞—é—Ç)
make test-unit

# –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤
make test-debug
```

### –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã –ø–æ –ø–æ—Ä—è–¥–∫—É (unit ‚Üí integration ‚Üí e2e)
make test

# –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
make test-integration

# –¢–æ–ª—å–∫–æ E2E —Ç–µ—Å—Ç—ã  
make test-e2e

# –¢–µ—Å—Ç—ã –¥–ª—è CI/CD (–±–µ–∑ E2E)
make test-ci
```

### –ê–Ω–∞–ª–∏–∑ –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ:
```bash
# –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
make test-coverage

# –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç–æ–≤
make test-unit-coverage

# –ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
make test-bench

# –ü–æ–∏—Å–∫ race conditions
make test-race

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
make test-run TEST=TestName
```

## üìã –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

| –¢–∏–ø —Ç–µ—Å—Ç–∞ | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|-----------|-------------|--------|------------|
| Unit | SQLite | ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç | ~100+ —Ç–µ—Å—Ç–æ–≤ |
| Integration | PostgreSQL | ‚ö†Ô∏è –ú–∏–≥—Ä–∞—Ü–∏—è | –ü–µ—Ä–µ–≤–æ–¥–∏–º –Ω–∞ testcontainers |
| E2E | PostgreSQL | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç | –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å API signatures |

## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –î–ª—è unit —Ç–µ—Å—Ç–æ–≤:
- –¢–æ–ª—å–∫–æ Go (–Ω–∏–∫–∞–∫–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

### –î–ª—è integration/E2E —Ç–µ—Å—Ç–æ–≤:
- Docker (–¥–ª—è testcontainers)
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç (–¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è PostgreSQL –æ–±—Ä–∞–∑–∞)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏**: `TEST_MIGRATION_TASKS.md`
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è**: `INTEGRATION_TEST_STRATEGY.md`
- **Makefile –∫–æ–º–∞–Ω–¥—ã**: `MAKEFILE_TEST_STRUCTURE.md`
- **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º**: `TEST_FAILURE_ANALYSIS.md`

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç—ã:
```go
// –ò—Å–ø–æ–ª—å–∑—É—é—Ç SQLite, –±—ã—Å—Ç—Ä—ã–µ
func TestSomething(t *testing.T) {
    db := setupTestDB(t) // SQLite in-memory
    // —Ç–µ—Å—Ç –ª–æ–≥–∏–∫–∏
}
```

### Integration —Ç–µ—Å—Ç—ã:
```go
// –ò—Å–ø–æ–ª—å–∑—É—é—Ç PostgreSQL testcontainers
func TestIntegration(t *testing.T) {
    testDB := SetupTestDatabase(t) // PostgreSQL container
    defer testDB.Cleanup(t)
    // —Ç–µ—Å—Ç —Å —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π
}
```

## üö® –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Integration —Ç–µ—Å—Ç—ã**: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
2. **E2E —Ç–µ—Å—Ç—ã**: –ù–µ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è (API signatures)
3. **Search —Ç–µ—Å—Ç—ã**: –ü–∞–¥–∞—é—Ç –∏–∑-–∑–∞ PostgreSQL full-text search

## üìû –ü–æ–º–æ—â—å

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker: `docker --version`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `make test-compile`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ unit —Ç–µ—Å—Ç—ã: `make test-unit`
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∑–∞–¥–∞—á–∏: `TEST_MIGRATION_TASKS.md`