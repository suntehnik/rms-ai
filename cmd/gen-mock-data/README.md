# Mock Data Generator

Этот скрипт генерирует моковые данные для системы управления требованиями продукта.

## Что генерируется

### Пользователи (20 пользователей)
- 1 администратор
- 16 обычных пользователей  
- 3 комментатора
- Все пользователи имеют пароль: `password123`

### Эпики (200 эпиков)
- Осмысленные названия на основе реальных доменов (Authentication, Payment Processing, Data Analytics и т.д.)
- Различные статусы (Backlog, Draft, In Progress, Done, Cancelled)
- Случайные приоритеты (Critical, High, Medium, Low)
- Подробные описания

### Пользовательские истории (3-7 на эпик)
- Названия в формате "Action Object" (например, "Login Profile", "View Dashboard")
- Описания в формате пользовательских историй: "As a [role], I want to [action], so that I can [goal]"
- Различные статусы и приоритеты

### Критерии приемки (2-5 на пользовательскую историю)
- Описания в формате EARS: "WHEN [condition] THEN system SHALL [action]"
- Связаны с соответствующими пользовательскими историями

### Требования (3-8 на пользовательскую историю)
- Технические требования с осмысленными названиями
- Различные типы (Functional, Non-Functional, Business Rule, Interface, Data)
- Подробные описания с техническими деталями
- Различные статусы (Draft, Active, Obsolete)

### Комментарии
- 1-3 комментария на каждое требование
- 1-2 комментария на каждую пользовательскую историю
- 1-2 комментария на каждый эпик
- Реалистичные комментарии с обратной связью и предложениями
- 30% комментариев помечены как решенные

## Использование

### Предварительные требования
1. Убедитесь, что PostgreSQL запущен и доступен
2. Настройте переменные окружения для подключения к базе данных (или используйте значения по умолчанию)

### Запуск скрипта

```bash
# Сборка скрипта
make build-gen-mock-data

# Или напрямую через go
go build -o bin/gen-mock-data cmd/gen-mock-data/main.go

# Запуск
./bin/gen-mock-data
```

### Переменные окружения

Скрипт использует те же переменные окружения, что и основное приложение:

```bash
# База данных
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password
DB_NAME=requirements_db
DB_SSLMODE=disable

# JWT (обязательно для production)
JWT_SECRET=your-secret-key
```

## Результат

После успешного выполнения в базе данных будет создано:
- 20 пользователей
- 200 эпиков
- ~1000 пользовательских историй (3-7 на эпик)
- ~3500 критериев приемки (2-5 на историю)
- ~5500 требований (3-8 на историю)
- ~8000 комментариев (1-3 на требование + комментарии на истории и эпики)

Общий объем: **~17,000+ записей** с реалистичными взаимосвязями и содержимым.

## Особенности

1. **Реалистичные данные**: Все названия, описания и комментарии имеют смысл и соответствуют реальным сценариям разработки продукта.

2. **Правильные форматы**: 
   - Пользовательские истории в формате "As a [role], I want [action], so that [goal]"
   - Критерии приемки в формате EARS
   - Технические требования с детальными описаниями

3. **Случайное распределение**: Статусы, приоритеты, назначения и временные метки распределены случайным образом для имитации реальной рабочей среды.

4. **Связанные данные**: Все сущности правильно связаны между собой с соблюдением иерархии Epic → User Story → Requirements.

5. **Временные метки**: Все записи имеют реалистичные временные метки в прошлом (до 90 дней назад).

## Очистка данных

Для очистки сгенерированных данных можно использовать:

```sql
-- Удаление всех данных (осторожно!)
TRUNCATE TABLE comments, requirements, acceptance_criteria, user_stories, epics, users RESTART IDENTITY CASCADE;

-- Или через миграции
make migrate-down
make migrate-up
```

## Примечания

- Скрипт автоматически создает таблицы и заполняет справочные данные (типы требований, типы связей)
- Все пароли пользователей: `password123`
- Скрипт безопасен для повторного запуска (но создаст дубликаты данных)
- Для production использования рекомендуется настроить JWT_SECRET